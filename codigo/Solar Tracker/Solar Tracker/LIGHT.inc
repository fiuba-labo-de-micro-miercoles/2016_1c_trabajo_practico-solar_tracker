/*
*	LIGHT.inc [COMO SI FUERA UN OBJETO]
*
*  Created: 01/06/2016 13:10:11 p.m.
*   Author: MAU
*/ 
.CSEG

LIGHT_TURN_ON:
	PUSH AUX
	PUSHI SREG

	INPUT AUX,BT_FLAG
	CPI AUX,0xFF						;[FLAG=0xFF]: ESTA CONECTADO A BT. 
	BREQ ORDEN_BT_NO_HACER_NADA		;[FLAG=0x00]: NO ESTA CONECTADO A BT.
	INPUT AUX,PORTB
	ORI AUX,(1<<LIGHT_PIN)
	OUTPUT PORTB,AUX

ORDEN_BT_NO_HACER_NADA:
	POPI SREG
	POP AUX
RET

LIGHT_TURN_OFF:
	PUSH AUX
	PUSHI SREG		

	INPUT AUX,BT_FLAG
	CPI AUX,0xFF						;[FLAG=0xFF]: ESTA CONECTADO A BT. 
	BREQ ORDEN_BT_NO_HACER_NADA		;[FLAG=0x00]: NO ESTA CONECTADO A BT.
	INPUT AUX,PORTB
	ANDI AUX,(~(1<<LIGHT_PIN))
	OUTPUT PORTB,AUX

	POPI SREG
	POP AUX
RET