;-------------------------------------------------------------------------
;
;							MOTORS.inc
;
;-------------------------------------------------------------------------
.CSEG

MOTORS_INIT:
	INPUT AUX,DDRD
	ANDI AUX,(~((1<<DDD5)|(1<<DDD6)))
	ORI AUX,((1<<DDD5)|(1<<DDD6))
	OUTPUT DDRD,AUX

	INPUT AUX,PORTD
	ANDI AUX,(~((1<<MOT_1)|(1<<MOT_2)))
	OUTPUT PORTD,AUX

	CLR	AUX
	OUTPUT	OCR1AL,AUX
	OUTPUT	OCR1AH,AUX
	OUTPUT	OCR1BL,AUX
	OUTPUT	OCR1BH,AUX
RET

MOTOR_ELEVATION_UP:
;SETEO MOT_1 Y MOT_2
;SETEO LOS ENABLE
;SETEO EL PWM
	INPUT AUX,PORTD
	ANDI AUX,(~((1<<MOT_1)|(1<<MOT_2)))
	ORI AUX,((0<<MOT_1)|(1<<MOT_2))			;CHEQUEAR CUANDO SE CONECTE
	OUTPUT PORTD,AUX

	CLR	AUX
	OUTPUT	OCR1BL,AUX

	LDI	AUX,170
	OUTPUT	OCR1AL,AUX
RET

MOTOR_ELEVATION_DOWN:
;SETEO MOT_1 Y MOT_2
;SETEO LOS ENABLE
;SETEO EL PWM
	INPUT AUX,PORTD
	ANDI AUX,(~((1<<MOT_1)|(1<<MOT_2)))
	ORI AUX,((1<<MOT_1)|(0<<MOT_2))			;CHEQUEAR CUANDO SE CONECTE
	OUTPUT PORTD,AUX

	CLR	AUX
	OUTPUT	OCR1BL,AUX

	LDI	AUX,170
	OUTPUT	OCR1AL,AUX
RET

MOTOR_AZIMUT_LEFT:
;SETEO MOT_1 Y MOT_2
;SETEO LOS ENABLE
;SETEO EL PWM
	INPUT AUX,PORTD
	ANDI AUX,(~((1<<MOT_1)|(1<<MOT_2)))
	ORI AUX,((1<<MOT_1)|(0<<MOT_2))			;CHEQUEAR CUANDO SE CONECTE
	OUTPUT PORTD,AUX

	CLR	AUX
	OUTPUT	OCR1AL,AUX

	LDI	AUX,170
	OUTPUT	OCR1BL,AUX
RET

MOTOR_AZIMUT_RIGHT:
;SETEO MOT_1 Y MOT_2
;SETEO LOS ENABLE
;SETEO EL PWM
	INPUT AUX,PORTD
	ANDI AUX,(~((1<<MOT_1)|(1<<MOT_2)))
	ORI AUX,((0<<MOT_1)|(1<<MOT_2))			;CHEQUEAR CUANDO SE CONECTE
	OUTPUT PORTD,AUX

	CLR	AUX
	OUTPUT	OCR1AL,AUX

	LDI	AUX,170
	OUTPUT	OCR1BL,AUX

RET

MOTORS_OFF:
;SETEO MOT_1 Y MOT_2
;SETEO LOS ENABLE
;SETEO EL PWM
	CLR	AUX
	OUTPUT	OCR1AL,AUX
	OUTPUT	OCR1BL,AUX

	INPUT AUX,PORTD
	ANDI AUX,(~((1<<MOT_1)|(1<<MOT_2)))
	ORI AUX,((0<<MOT_1)|(0<<MOT_2))			;CHEQUEAR CUANDO SE CONECTE
	OUTPUT PORTD,AUX
RET